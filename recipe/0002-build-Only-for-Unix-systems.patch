From 33713ee0b44fea3d4ee78ab40d403bebb0e75daf Mon Sep 17 00:00:00 2001
From: Julien Jerphanion <git@jjerphan.xyz>
Date: Mon, 6 Jan 2025 13:17:03 +0100
Subject: [PATCH] build: Only for Unix systems

Signed-off-by: Julien Jerphanion <git@jjerphan.xyz>

Co-authored-by: Klaim <Klaim@users.noreply.github.com>
---
 micromamba/CMakeLists.txt | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/micromamba/CMakeLists.txt b/micromamba/CMakeLists.txt
index 4d313644..a75d436d 100644
--- a/micromamba/CMakeLists.txt
+++ b/micromamba/CMakeLists.txt
@@ -105,9 +105,9 @@ endif()
 # Installation
 # ============
 
-# The script are only needed for mamba and not for micromamba
-
-if(BUILD_SHARED)
+# This profile script is only needed for mamba on Unix systems.
+if(BUILD_SHARED AND UNIX)
+    message(STATUS "Generating profile script for mamba (i.e. `etc/profile.d/mamba.sh`)")
     configure_file(
         "${CMAKE_CURRENT_SOURCE_DIR}/etc/profile.d/mamba.sh.in"
         "${CMAKE_CURRENT_BINARY_DIR}/etc/profile.d/mamba.sh"
-- 
2.47.1

